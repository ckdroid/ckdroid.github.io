
<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/konva@4.0.5/konva.min.js"></script>
    <meta charset="utf-8" />
    <title>Konva Image Events Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
<div id="container" ></div>
<script>
    var width = window.innerWidth;
    var height = window.innerHeight;

    var tween = null;

    function addStar(layer, stage) {
        var scale = Math.random();

        var star = new Konva.Star({
            x: Math.random() * stage.getWidth(),
            y: Math.random() * stage.getHeight(),
            numPoints: 6,
            innerRadius: 30,
            outerRadius: 50,
            fill: "#89b717",
            opacity: 0.8,
            scale: {
                x: scale,
                y: scale
            },
            rotation: Math.random() * 180,
            shadowColor: "black",
            shadowBlur: 10,
            shadowOffset: {
                x: 0,
                y: 0
            },
            shadowOpacity: 0.6,
            // custom attribute
            startScale: scale
        });

        star.on('mouseenter', function() {
            this.setAttrs({
                shadowOffset: {
                    x: 5,
                    y: 5
                },
            });
            layer.draw();
        }).on('mouseleave', function() {
            this.to({
                duration: 0.1,
                easing: Konva.Easings.ElasticEaseOut,
                shadowOffsetX: 0,
                shadowOffsetY: 0
            });
            layer.draw();
        }).on('touchstart', function() {
            this.setAttrs({
                shadowOffset: {
                    x: 5,
                    y: 5
                },
            });
            layer.draw();
        }).on('touchend', function() {
            this.to({
                duration: 0.1,
                easing: Konva.Easings.ElasticEaseOut,
                shadowOffsetX: 0,
                shadowOffsetY: 0
            });
            layer.draw();
        });

        layer.add(star);
    }
    var stage = new Konva.Stage({
        container: "container",
        width: width,
        height: height
    });

    var layer = new Konva.Layer();
    var dragLayer = new Konva.Layer();

    for (var n = 0; n < 30; n++) {
        addStar(layer, stage);
    }

    stage.add(layer, dragLayer);

    stage.on("click", function(evt) {
        var shape = evt.target;
        console.log(shape);
    });

</script>
</body>
</html>
